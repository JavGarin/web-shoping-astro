---
export const prerender = false;
import Layout from '../layouts/Layout.astro';
import ProductCard from '../components/ProductCard.astro';
import { supabase } from '../lib/supabase';

// Fetch all products from Supabase
const { data: allProducts, error } = await supabase
  .from('products')
  .select('*');

if (error) console.error('Error fetching products:', error.message);
---

<Layout title="All Products - TheCountryHouse">
  <div class="text-center">
    <h1 class="text-4xl font-bold">All Our Products</h1>
    <p class="mt-4 text-lg text-charcoal-gray">Browse our full collection of curated goods.</p>
  </div>
  <div class="mt-8 grid gap-4 sm:grid-cols-2 lg:grid-cols-4">
    {allProducts && allProducts.map(product => (
      <ProductCard product={product} />
    ))}
  </div>
</Layout>